/***************************************************************************/ /**
   @file     main.c
   @brief    MP3 Player main
   @author   Grupo 3
  ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/
#include "Audio.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/
volatile bool PIT_trigger;
volatile bool DMA_trigger;

volatile uint16_t bufA[AUDIO_BUF_LEN];
volatile uint16_t bufB[AUDIO_BUF_LEN];

/*******************************************************************************
 *******************************************************************************
						GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

void App_Init(void)
{
	// AUDIO TEST

	 //Enable port clock for DAC pin
	SIM->SCGC5 |= SIM_SCGC5_PORTB_MASK;

	 //Put DAC pin in pure analog mode
	PORTB->PCR[2] = 0;   // adjust pin number to your board

	Audio_Init();
	__enable_irq();
}

void App_Run(void)
{
    // AUDIO TEST
	Audio_Service();

    if(PIT_trigger){
    	PIT_trigger = false;
    }
    if(DMA_trigger){
    	DMA_trigger = false;
    }
}


/*******************************************************************************
 *******************************************************************************
						LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/



/*******************************************************************************
 ******************************************************************************/
